{"componentChunkName":"component---src-templates-blog-template-js","path":"/b-improve-query/","result":{"data":{"cur":{"id":"8b868113-03c0-5a76-b495-aadd07c24a27","html":"<h2 id=\"ì¶”ì²œë¹„ì¶”ì²œ-ë¡œì§-ê°œì„ \" style=\"position:relative;\"><a href=\"#%EC%B6%94%EC%B2%9C%EB%B9%84%EC%B6%94%EC%B2%9C-%EB%A1%9C%EC%A7%81-%EA%B0%9C%EC%84%A0\" aria-label=\"ì¶”ì²œë¹„ì¶”ì²œ ë¡œì§ ê°œì„  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¶”ì²œ/ë¹„ì¶”ì²œ ë¡œì§ ê°œì„ </h2>\n<p>Q&#x26;A ì¶”ì²œ/ë¹„ì¶”ì²œ ë¡œì§ì„ ì´ì „ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Q&amp;A ì¶”ì²œ ë¡œì§ ì½”ë“œ</span>\n<span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createLike</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> qnaId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMember</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">QnA</span> qna <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">checkQnAValidate</span><span class=\"token punctuation\">(</span>qnaId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">QnALikeDislikeId</span> id <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QnALikeDislikeId</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\tqnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n\t    <span class=\"token punctuation\">.</span><span class=\"token function\">ifPresentOrElse</span><span class=\"token punctuation\">(</span>\n\t        result <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n\t            <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t                <span class=\"token keyword\">case</span> <span class=\"token class-name\">G</span><span class=\"token operator\">:</span>\n\t                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateDeleteStatus</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t                    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\n\t                <span class=\"token keyword\">case</span> <span class=\"token class-name\">B</span><span class=\"token operator\">:</span>\n\t                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getIsDeleted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t                        qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">recoverLikeDislike</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t                    <span class=\"token punctuation\">}</span>\n\t                    qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">updateQnALikeStatusToGood</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t                    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t            <span class=\"token punctuation\">}</span>\n\t        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n\t            <span class=\"token class-name\">QnALikeDislike</span> likeDislike <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QnALikeDislike</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">LikeStatus</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"G\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t            qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>likeDislike<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t        <span class=\"token punctuation\">}</span>\n\t    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateLikesAndDislikes</span><span class=\"token punctuation\">(</span>qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">updateDeleteStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QnALikeDislike</span> likeDislike<span class=\"token punctuation\">,</span> <span class=\"token class-name\">QnALikeDislikeId</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>likeDislike<span class=\"token punctuation\">.</span><span class=\"token function\">getIsDeleted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">deleteById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">.</span><span class=\"token function\">getMember</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">getQna</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">recoverLikeDislike</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">.</span><span class=\"token function\">getMember</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">getQna</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// repository</span>\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n        value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"SET status = 'G' \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna AND isDeleted = false\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">updateQnALikeStatusToGood</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n    value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"SET status = 'B' \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna AND isDeleted = false\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">updateQnALikeStatusToBad</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n    value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"SET isDeleted = true \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">deleteById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ê¸°ì¡´ ì¶”ì²œ/ë¹„ì¶”ì²œ ë¡œì§ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ol>\n<li>\n<p>qnaId, memberIdë¥¼ ì´ìš©í•´ ì¶”ì²œ/ë¹„ì¶”ì²œ ë°ì´í„°ë¥¼ findByIdë¡œ ë°›ì•„ì˜¨ë‹¤.</p>\n</li>\n<li>\n<p>ë§Œì•½ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°, ì•„ë˜ì™€ ê°™ì´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œë‹¤. (ì¶”ì²œ ë¡œì§ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•œë‹¤.)</p>\n<ol>\n<li><code class=\"language-text\">G(ì¶”ì²œ)</code>, <code class=\"language-text\">B(ë¹„ì¶”ì²œ)</code> ì—¬ë¶€ë¥¼ ë°›ì•„ì˜¨ë‹¤.</li>\n<li>ë§Œì•½ <strong>ìƒíƒœê°€ ì¶”ì²œ</strong>ì´ë¼ë©´, ì‚­ì œê°€ ì•ˆ ëœ ê²½ìš° ì¶”ì²œ ì·¨ì†Œë¡œ ì¸ì‹í•˜ê³  í•´ë‹¹ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤.</li>\n<li><strong>ìƒíƒœê°€ ì¶”ì²œ</strong>ì¸ë° ì‚­ì œëœ ê²½ìš° ë‹¤ì‹œ ë³µêµ¬ ì‹œí‚¨ë‹¤. (ë‹¤ì‹œ ì¶”ì²œ)</li>\n<li><strong>ìƒíƒœê°€ ë¹„ì¶”ì²œ</strong>ì¸ ê²½ìš°, ë§Œì•½ í•´ë‹¹ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìœ¼ë©´ ë³µêµ¬ í›„ ì¶”ì²œ ìƒíƒœë¡œ ë³€ê²½í•œë‹¤. (B â†’ G)</li>\n</ol>\n</li>\n<li>\n<p>ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ìƒˆë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.</p>\n</li>\n</ol>\n<p>í•˜ì§€ë§Œ ìƒê°í•´ë³´ë‹ˆ,, ë°ì´í„°ë¥¼ êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ğŸ¥²</p>\n<p>ì¼ë°˜ì ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë‘ë²ˆ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ í•œ ë²ˆì— ìš”ì²­í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¸ ê²ƒìœ¼ë¡œ ì•Œê³  ìˆë‹¤.</p>\n<p>ê·¸ë˜ì„œ ê³ ë¯¼ ëì— ì¿¼ë¦¬ë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ ë¡œì§ì„ ê°œì„ í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createQnALike</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> qnaId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMember</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">QnA</span> qna <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getQnA</span><span class=\"token punctuation\">(</span>qnaId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">QnALikeDislikeId</span> id <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QnALikeDislikeId</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">ifPresentOrElse</span><span class=\"token punctuation\">(</span>\n            result <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">case</span> <span class=\"token class-name\">G</span><span class=\"token operator\">:</span>\n                        qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">updateDeleteStatus</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\n                    <span class=\"token keyword\">case</span> <span class=\"token class-name\">B</span><span class=\"token operator\">:</span>\n                        qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">updateQnALikeStatusToGoodOrBad</span><span class=\"token punctuation\">(</span>\n                            member<span class=\"token punctuation\">,</span>\n                            qna<span class=\"token punctuation\">,</span>\n                            <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n                            <span class=\"token class-name\">LikeStatus<span class=\"token punctuation\">.</span>G</span>\n                        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">QnALikeDislike</span> likeDislike <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QnALikeDislike</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">LikeStatus</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"G\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                qnaLikeDislikeRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>likeDislike<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateLikesAndDislikes</span><span class=\"token punctuation\">(</span>qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// repository</span>\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n        value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"SET status = :status, isDeleted = :isDeleted \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">updateQnALikeStatusToGoodOrBad</span><span class=\"token punctuation\">(</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isDeleted\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Boolean</span> isDeleted<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">LikeStatus</span> status\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n    value <span class=\"token operator\">=</span> <span class=\"token string\">\"SELECT COUNT(q) \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"FROM QnALikeDislike q \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"WHERE q.id.qna = :qna AND q.status = :status AND q.isDeleted = :isDeleted\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">countQnALikeOrDislikeByQnAId</span><span class=\"token punctuation\">(</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">LikeStatus</span> status<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isDeleted\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Boolean</span> isDeleted\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n    value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"SET isDeleted = IF(isDeleted, false, true) \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">updateDeleteStatus</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ê°œì„ í•œ ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ol>\n<li>\n<p><code class=\"language-text\">G(ì¶”ì²œ)</code>, <code class=\"language-text\">B(ë¹„ì¶”ì²œ)</code> ì—¬ë¶€ë¥¼ ë°›ì•„ì˜¨ë‹¤.</p>\n</li>\n<li>\n<p>ë§Œì•½ <strong>ìƒíƒœê°€ ì¶”ì²œ</strong>ì´ë¼ë©´, IF í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ì‚­ì œëœ ê²½ìš° ì‚­ì œ ì·¨ì†Œ, ì‚­ì œë˜ì§€ ì•Šì€ ê²½ìš° ì‚­ì œí•˜ë„ë¡ ì¿¼ë¦¬ë¥¼ ë³€ê²½í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SET</span> isDeleted <span class=\"token operator\">=</span> <span class=\"token keyword\">IF</span><span class=\"token punctuation\">(</span>isDeleted<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>\n<p><strong>ìƒíƒœê°€ ë¹„ì¶”ì²œ</strong>ì¸ ê²½ìš°, ì‚­ì œ ì—¬ë¶€ë‘ ìƒê´€ì—†ì´ <code class=\"language-text\">isDeleted = false</code>ë¡œ ë³€ê²½í•œ í›„ ìƒíƒœë¥¼ Gë¡œ ë³€ê²½í•œë‹¤.</p>\n</li>\n</ol>\n<p>ê¸°ì¡´ ë¡œì§ê³¼ ë‹¬ë¦¬ ì¿¼ë¦¬ë¥¼ í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì— ë¡œì§ ë° ì†ë„ë¥¼ ê°œì„ í•  ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>ì¶”ê°€ì ìœ¼ë¡œ ë°”ì¸ë”© ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ JPQL ì¿¼ë¦¬ë¥¼ ìˆ˜ì •í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// ê¸°ì¡´</span>\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n        value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"SET status = 'G' \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna AND isDeleted = false\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">updateQnALikeStatusToGood</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n    value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"SET status = 'B' \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna AND isDeleted = false\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">updateQnALikeStatusToBad</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ê°œì„ </span>\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n        value <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE QnALikeDislike \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"SET status = :status, isDeleted = :isDeleted \"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"WHERE id.member = :member AND id.qna = :qna\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">updateQnALikeStatusToGoodOrBad</span><span class=\"token punctuation\">(</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qna\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">QnA</span> qna<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isDeleted\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Boolean</span> isDeleted<span class=\"token punctuation\">,</span>\n    <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">LikeStatus</span> status\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë°”ì¸ë”© ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì¥ì ì´ ìˆë‹¤. (from ì¹œì ˆí•œ SQL íŠœë‹)</p>\n<p><a href=\"https://github.com/yu-heejin/kind-SQL-tuning/blob/main/1%EC%9E%A5/1.2_SQL_%EA%B3%B5%EC%9C%A0_%EB%B0%8F_%EC%9E%AC%EC%82%AC%EC%9A%A9.md\"></a></p>\n<ul>\n<li>\n<p>SQLì˜ ê²½ìš°, ìºì‹œì— ì €ì¥ë  ë•Œ ë³„ë„ì˜ ì´ë¦„ì´ ë”°ë¡œ ì—†ê³ , SQLë¬¸ ìì²´ê°€ ì´ë¦„ì´ ëœë‹¤.</p>\n</li>\n<li>\n<p>ë”°ë¼ì„œ ê¸°ì¡´ SQLì˜ ê²½ìš°, ë‘ SQLë¬¸ì´ ë³„ë„ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìºì‹œì— ì €ì¥ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> QnALikeDislike\n<span class=\"token keyword\">SET</span> <span class=\"token keyword\">status</span> <span class=\"token operator\">=</span> <span class=\"token string\">'G'</span>\n<span class=\"token keyword\">WHERE</span> id<span class=\"token punctuation\">.</span>member <span class=\"token operator\">=</span> :member <span class=\"token operator\">AND</span> id<span class=\"token punctuation\">.</span>qna <span class=\"token operator\">=</span> :qna <span class=\"token operator\">AND</span> isDeleted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token keyword\">UPDATE</span> QnALikeDislike\n<span class=\"token keyword\">SET</span> <span class=\"token keyword\">status</span> <span class=\"token operator\">=</span> <span class=\"token string\">'B'</span>\n<span class=\"token keyword\">WHERE</span> id<span class=\"token punctuation\">.</span>member <span class=\"token operator\">=</span> :member <span class=\"token operator\">AND</span> id<span class=\"token punctuation\">.</span>qna <span class=\"token operator\">=</span> :qna <span class=\"token operator\">AND</span> isDeleted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span></code></pre></div>\n</li>\n<li>\n<p>í•˜ì§€ë§Œ ë°”ì¸ë”© ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²½ìš°, <strong>ìºì‹œì—ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì¿¼ë¦¬ë¬¸ë§Œ ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ìºì‹œ ê³µê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.</strong></p>\n</li>\n<li>\n<p>ì¡°íšŒ ì‹œ ìºì‹œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ë  ê²ƒì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> QnALikeDislike \n<span class=\"token keyword\">SET</span> <span class=\"token keyword\">status</span> <span class=\"token operator\">=</span> :<span class=\"token keyword\">status</span><span class=\"token punctuation\">,</span> isDeleted <span class=\"token operator\">=</span> :isDeleted\n<span class=\"token keyword\">WHERE</span> id<span class=\"token punctuation\">.</span>member <span class=\"token operator\">=</span> :member <span class=\"token operator\">AND</span> id<span class=\"token punctuation\">.</span>qna <span class=\"token operator\">=</span> :qna</code></pre></div>\n</li>\n</ul>\n<p>ë°”ì¸ë”© ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ SQL Injectionë„ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤ê³  í•˜ëŠ”ë°, JPAëŠ” ë‚´ë¶€ì ìœ¼ë¡œ PreparedStatementë¥¼ ì‚¬ìš©í•œë‹¤ê³  ì•Œê³  ìˆì–´ì„œ ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì¶”ê°€ë¡œ ë” ì•Œì•„ë´ì•¼ í•  ê²ƒ ê°™ë‹¤.</p>\n<h2 id=\"ìŠ¤í¬ë©-ë¡œì§-ê°œì„ \" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%81%AC%EB%9E%A9-%EB%A1%9C%EC%A7%81-%EA%B0%9C%EC%84%A0\" aria-label=\"ìŠ¤í¬ë© ë¡œì§ ê°œì„  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìŠ¤í¬ë© ë¡œì§ ê°œì„ </h2>\n<p>Q&#x26;A ìŠ¤í¬ë©ë„ ë¹„ìŠ·í•œ ë¡œì§ìœ¼ë¡œ ì‘ì„±í•˜ë ¤ê³  í–ˆì—ˆë‹¤.</p>\n<p>ê¸°ì¡´ì— ë‚´ê°€ ìƒê°í–ˆë˜ ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<ol>\n<li><code class=\"language-text\">findById</code>ë¡œ ìŠ¤í¬ë© ë°ì´í„°ë¥¼ ì°¾ëŠ”ë‹¤.</li>\n<li>ì´ë¯¸ ìˆëŠ” ê²½ìš° ìŠ¤í¬ë© ì·¨ì†Œë¡œ ì¸ì‹í•˜ê³  <code class=\"language-text\">deleteById</code>ë¥¼ ìˆ˜í–‰í•œë‹¤.</li>\n<li>ì´ë¯¸ ë°ì´í„°ê°€ ìˆëŠ”ë° deletedëœ ê²½ìš° ë‹¤ì‹œ ë³µêµ¬ì‹œí‚¨ë‹¤.</li>\n<li>ì—†ìœ¼ë©´ ìƒˆë¡œ ë§Œë“¤ì–´ì£¼ì–´ ìŠ¤í¬ë©ì„ ì„±ê³µì‹œí‚¨ë‹¤.</li>\n</ol>\n<p>ê·¸ëŸ¬ë‚˜ ìœ„ì™€ ê°™ì€ ë¡œì§ìœ¼ë¡œ ì‘ì„±í•˜ë‹ˆ if ë¶„ê¸°ê°€ ìƒê¸°ê¸°ë„ í•˜ê³ , ë³µì¡í•´ì§€ê¸°ë„ í•´ì„œ ì–´ë–»ê²Œ ê°œì„ í• ì§€ ê³ ë¯¼í•˜ë‹¤ê°€, ì˜ˆì „ì— íšŒì‚¬ì—ì„œ ê¸°ì¡´ ë°±ì—”ë“œ ì„œë²„ ë¦¬íŒ©í† ë§ í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œ ë°°ì› ë˜ <code class=\"language-text\">ON DUPLICATE KEY UPDATE</code>ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createQnAScrap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> qnaId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Long</span> memberId <span class=\"token operator\">=</span> <span class=\"token function\">getMemberId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    qnaScrapRepository<span class=\"token punctuation\">.</span><span class=\"token function\">createOrUpdateQnAScrap</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">,</span> qnaId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Modifying</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>\n    nativeQuery <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    value <span class=\"token operator\">=</span> <span class=\"token string\">\"INSERT INTO qna_scrap (member_id, qna_id) \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"VALUES (:memberId, :qnaId) \"</span> <span class=\"token operator\">+</span>\n            <span class=\"token string\">\"ON DUPLICATE KEY UPDATE is_deleted = IF(is_deleted, 0, 1)\"</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">createOrUpdateQnAScrap</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberId\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"qnaId\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Long</span> qnaId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">ON DUPLICATE KEY UPDATE</code>ëŠ” ì¤‘ë³µëœ keyê°’ì´ ìˆëŠ” ê²½ìš° ì§€ì •ëœ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , ì•„ë‹ˆë¼ë©´ <code class=\"language-text\">INSERT</code>í•˜ëŠ” ì¿¼ë¦¬ì´ë‹¤.</p>\n<p><a href=\"https://github.com/techeer-TIL-group/yu-heejin/blob/main/Database/on-duplicate-key-update.md\"></a></p>\n<p>ìœ„ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í† ê¸€ ë°©ì‹ì„ ë” ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤. ğŸ˜†</p>","excerpt":"ì¶”ì²œ/ë¹„ì¶”ì²œ ë¡œì§ ê°œì„  Q&A ì¶”ì²œ/ë¹„ì¶”ì²œ ë¡œì§ì„ ì´ì „ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í–ˆë‹¤. ê¸°ì¡´ ì¶”ì²œ/ë¹„ì¶”ì²œ ë¡œì§ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. qnaId, memberIdë¥¼ ì´ìš©í•´ ì¶”ì²œ/ë¹„ì¶”ì²œ ë°ì´í„°ë¥¼ findByIdë¡œ ë°›ì•„ì˜¨ë‹¤. ë§Œì•½ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°, ì•„ë˜ì™€ ê°™ì´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œë‹¤. (ì¶”ì²œ ë¡œì§ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•œë‹¤.) ,  ì—¬ë¶€ë¥¼ ë°›ì•„ì˜¨ë‹¤. ë§Œì•½ ìƒíƒœê°€ ì¶”ì²œì´ë¼ë©´, ì‚­ì œê°€ ì•ˆ ëœ ê²½ìš° ì¶”ì²œ ì·¨ì†Œë¡œ ì¸ì‹í•˜ê³  í•´ë‹¹ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤. ìƒíƒœê°€ ì¶”ì²œì¸ë° ì‚­ì œëœ ê²½ìš° ë‹¤ì‹œ ë³µêµ¬ ì‹œí‚¨ë‹¤. (ë‹¤ì‹œ ì¶”ì²œ) ìƒíƒœê°€ ë¹„ì¶”ì²œì¸ ê²½ìš°, ë§Œì•½ í•´ë‹¹ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìœ¼ë©´ ë³µêµ¬ í›„ ì¶”ì²œ ìƒíƒœë¡œ ë³€ê²½í•œë‹¤. (B â†’ G) ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ìƒˆë¡œ ë§Œë“¤ì–´ì¤€ë‹¤. í•˜ì§€ë§Œ ìƒê°í•´ë³´ë‹ˆ,, ë°ì´í„°ë¥¼ êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ğŸ¥² ì¼ë°˜ì ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë‘ë²ˆ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ í•œ ë²ˆì— ìš”ì²­í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¸ ê²ƒìœ¼ë¡œ ì•Œê³  ìˆë‹¤. ê·¸ë˜ì„œ ê³ ë¯¼ ëì— ì¿¼ë¦¬ë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ ë¡œì§ì„ ê°œì„ í–ˆë‹¤. ê°œì„ í•œ ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. ,  ì—¬ë¶€â€¦","frontmatter":{"date":"February 01, 2024","title":"Q&A ì¶”ì²œ/ë¹„ì¶”ì²œ, Q&A ìŠ¤í¬ë© - ë°”ì¸ë”© ë³€ìˆ˜ ì‚¬ìš©, ì¿¼ë¦¬ë¬¸ ë° ë¡œì§ ê°œì„ ","categories":"Backend","author":"ìœ í¬ì§„","emoji":"â˜ï¸"},"fields":{"slug":"/b-improve-query/"}},"next":{"id":"c708287e-906e-5b9e-8d29-bb405931656b","html":"<h2 id=\"branch-type\" style=\"position:relative;\"><a href=\"#branch-type\" aria-label=\"branch type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Branch type</h2>\n<blockquote>\n<p>ë¸Œëœì¹˜ ì „ëµì€ ê°„ëµí•œ Git flow ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<ul>\n<li>main (master) : ê°œë°œ ì„œë²„ ë°°í¬ë¥¼ ìœ„í•œ ë¸Œëœì¹˜</li>\n<li>#{issue number}/name : ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ë¸Œëœì¹˜</li>\n</ul>\n<h2 id=\"branch-naming\" style=\"position:relative;\"><a href=\"#branch-naming\" aria-label=\"branch naming permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Branch Naming</h2>\n<aside>\nğŸ’¡ #{issue number}/{name}\n</aside>\n<ul>\n<li>ë¸Œëœì¹˜ëª…ì€ ë°˜ë“œì‹œ <strong>ì†Œë¬¸ìë¡œë§Œ ì‘ì„±</strong>í•´ì£¼ì‹œê³ , <strong>ì¼€ë°¥ ì¼€ì´ìŠ¤ë¡œ ì‘ì„±</strong>í•©ë‹ˆë‹¤.</li>\n<li>nameì€ ìŠ¤í”„ë¦°íŠ¸ë¥¼ ì˜ì–´ë¡œ ìš”ì•½í•˜ì—¬ ì‘ì„±í•´ì£¼ì„¸ìš”.</li>\n</ul>","frontmatter":{"date":"December 26, 2023","title":"Backend Branch Convention","categories":"Backend Convention","author":"ìœ í¬ì§„","emoji":"ğŸ“"},"fields":{"slug":"/b-branch-convention/"}},"prev":{"id":"de8558dc-499a-5a84-9650-37b9ed8a4be8","html":"<p>ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” í”„ë¡œì íŠ¸ì—ì„œ êµ¬í˜„í•œ  ì‚¬ìš©ì ì¸ì¦ ë° ì¸ê°€ êµ¬í˜„ ê³¼ì •ì„ ì‚´í´ë³´ê³ ì í•©ë‹ˆë‹¤.<br>\nì´ë¥¼ í†µí•´ íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.\n<br>\n<br>\n<br></p>\n<h2 id=\"spring-security-ë™ì‘-ë°©ì‹\" style=\"position:relative;\"><a href=\"#spring-security-%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D\" aria-label=\"spring security ë™ì‘ ë°©ì‹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spring Security ë™ì‘ ë°©ì‹</h2>\n<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¸ì¦/ì¸ê°€ì— ëŒ€í•œ ì„¤ì •ì„ í¸ë¦¬í•˜ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.</p>\n<img width=\"743\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-02-01 á„‹á…©á„’á…® 8 11 42\" src=\"https://github.com/devridge-team-project/devridge-team-project.github.io/assets/56336436/7d97921b-ff4f-41f9-91a5-07095bde181d\">\n<p>ìœ„ ì‚¬ì§„ì€ ì¼ë°˜ì ì¸ Spring ì„œë²„ì—ì„œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” êµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê·¸ë¦¼ì…ë‹ˆë‹¤.<br>\nì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì•ˆì—ëŠ” ì„œë¸”ë¦¿ì— ë„ë‹¬í•˜ê¸° ì „ì— ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” í•„í„°ë“¤ì˜ ì§‘í•©ì¸, FilterChain ì´ë¼ëŠ” ê²ƒì´ ìˆìŠµë‹ˆë‹¤.</p>\n<h4 id=\"filterchainì„œë¸”ë¦¿-ì»¨í…Œì´ë„ˆ\" style=\"position:relative;\"><a href=\"#filterchain%EC%84%9C%EB%B8%94%EB%A6%BF-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\" aria-label=\"filterchainì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FilterChain(ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ)</h4>\n<ul>\n<li>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  HTTP ìš”ì²­ì€ ì¼ë‹¨ Servlet Container(í†°ìº£)ì— ì˜í•´ ì²˜ë¦¬ë©ë‹ˆë‹¤.</li>\n<li>FilterChainì€ ìˆœì„œëŒ€ë¡œ ìš”ì²­ì„ í•„í„°ë§í•˜ê³  ë§ˆì§€ë§‰ í•„í„°ê°€ ì²˜ë¦¬ë¥¼ ì™„ë£Œí•˜ë©´, ìš”ì²­ì€ DispatcherServletìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.</li>\n</ul>\n<h4 id=\"delegatingfilterproxy\" style=\"position:relative;\"><a href=\"#delegatingfilterproxy\" aria-label=\"delegatingfilterproxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DelegatingFilterProxy</h4>\n<ul>\n<li>Springì˜ ApplicationContextì—ì„œ FilterChainProxyë¥¼ ì°¾ê³ , ëª¨ë“  ë³´ì•ˆ ê´€ë ¨ ì‘ì—…ì„ ìœ„ì„í•©ë‹ˆë‹¤.</li>\n<li>DelegatingFilterProxyë¥¼ í†µí•´ Springì´ ê´€ë¦¬í•˜ëŠ” ë³´ì•ˆ ì„¤ì •ì„ ì„œë¸”ë¦¿ í•„í„°ë¡œ í†µí•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h4 id=\"filterchainproxyìŠ¤í”„ë§-ì‹œíë¦¬í‹°\" style=\"position:relative;\"><a href=\"#filterchainproxy%EC%8A%A4%ED%94%84%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0\" aria-label=\"filterchainproxyìŠ¤í”„ë§ ì‹œíë¦¬í‹° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FilterChainProxy(ìŠ¤í”„ë§ ì‹œíë¦¬í‹°)</h4>\n<ul>\n<li>ì‹œíë¦¬í‹°ê°€ ì œê³µí•˜ëŠ” ìš”ì†Œë¡œ, ë³´ì•ˆ í•„í„°ë“¤ì˜ ì§‘í•©ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>DelegatingFilterChainProxy ë¥¼ í†µí•´ ì „ë‹¬ë°›ì€ ìš”ì²­ì„ FilterChainProxyì— ì˜í•´ ì²˜ë¦¬ë˜ê³  ì´ ê³¼ì •ì—ì„œ ì¸ì¦(Authentication), ì¸ê°€(Authorization) ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>\n</ul>\n<br>\n<br>\n<h2 id=\"ì¸ì¦ì¸ê°€\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D%EC%9D%B8%EA%B0%80\" aria-label=\"ì¸ì¦ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¸ì¦/ì¸ê°€</h2>\n<p>í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•´ ì¸ì¦/ì¸ê°€ëŠ” Spring-Securityì˜ Filter ì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.<br>\nSpring-Securityë¥¼ í†µí•´ì„œ \bë‹¤ìŒê³¼ ê°™ì€ í•„í„°ë“¤ì„ ë§Œë“¤ê³  ì´ë¥¼ ServletFilterChain ì— í¬í•¨ì‹œì¼°ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>JwtAuthenticationFilter</li>\n<li>JwtAuthorizationFilter</li>\n</ul>\n<br> \nìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” SecurityFilterChain í´ë˜ìŠ¤ë¥¼ Bean ìœ¼ë¡œ ë“±ë¡ë§Œ ì‹œì¼œì¤€ë‹¤ë©´ í•˜ë©´ ì•Œì•„ì„œ  \nDelegatingFilterProxy ì— ServletFilterChain ì— í¬í•¨ì‹œì¼œì¤ë‹ˆë‹¤.\n<br>\n<p><img src=\"https://github.com/devridge-team-project/devridge-team-project.github.io/assets/56336436/33bccd66-5aac-4ab9-910d-59387ae713f5\" alt=\"á„‹á…µá†«á„Œá…³á†¼á„’á…³á„…á…³á†·á„‹á…­á„‹á…£á†¨\"></p>\n<p>ì¸ì¦ íë¦„ì„ ì •ë¦¬í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>ì‚¬ìš©ìê°€ id, passwordë¥¼ ì…ë ¥í•´ ë¡œê·¸ì¸ì„ ì§„í–‰í•œë‹¤ -> ì¸ì¦ ì‹œë„</li>\n<li>AuthenticationFilter ì—ì„œ Username~Token ì¸ì¦ ê°ì²´ë¥¼ ë§Œë“¤ì–´, AuthenticationManagerì—ê²Œ ì¤€ë‹¤. (í† í° ì´ë¦„ì´ ë¬´ì²™ ê¸¸ë‹¤)</li>\n<li>AuthenticationManagerëŠ” ë‹¤ì‹œ AuthenticationProvider ì—ê²Œ ì¸ì¦ì„ ìœ„ì„í•˜ê³ ,  AuthenticationProviderëŠ” UserDetailsServiceì˜ loadUserByUsername() ë©”ì„œë“œë¥¼ í†µí•´ UserDetails ê°ì²´ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤.</li>\n<li>ì¸ì¦ ì„±ê³µ ì‹œ(id,pwê°€ ì¼ì¹˜í–ˆë‹¤ë©´), AuthenticationFilterëŠ” successfulAuthentication()ì„ í˜¸ì¶œí•´ SecurityContextì— ìœ„ì˜ ì´ë¦„ ê¸´ UsernamePasswordAuthenticationToken ê°ì²´ë¥¼ ë‹´ëŠ”ë‹¤.</li>\n<li>ì¸ì¦ì´ ì‹¤íŒ¨í•  ê²½ìš° unsuccessfulAuthentication() í˜¸ì¶œ, exceptionHandlerë¥¼ ì‹¤í–‰í•œë‹¤.</li>\n</ul>\n<br>\n<p>ì»¤ìŠ¤í…€í•˜ê²Œ ì •ì˜í•œ í´ë˜ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ol>\n<li>CustomMemberDetails (UserDetails)</li>\n<li>CustomMemberDetailsService (UserDetailsService)</li>\n<li>JwtAuthenticationProvider (AuthenticationProvider)</li>\n<li>JwtAuthenticationFilter (AuthenticationFilter)</li>\n<li>JwtAuthorizationFilter (AuthorizationFilter)</li>\n<li>CustomLogoutHandler (LogoutSuccessHandler)</li>\n</ol>\n<br>\n<p>ë˜í•œ SecurityConfig í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´, Spring-Securityì˜ ì„¤ì •ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ì„œë¸”ë¦¿ í•„í„°ì˜ ì²´ì¸ì˜ ì¼ë¶€ë¡œ ë“±ë¡ë˜ì–´ ì‹œíë¦¬í‹°ì˜ FilterChainProxyì— ì˜í–¥ì„ ë¯¸ì¹˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableWebSecurity</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SecurityConfig</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SecurityFilterChain</span> <span class=\"token function\">securityFilterChain</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSecurity</span> http<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/**\n        \tì¤‘ê°„ ìƒëµ\n        */</span>\n        \n        http\n            <span class=\"token punctuation\">.</span><span class=\"token function\">logout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">logoutUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/logout\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">logoutSuccessHandler</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomLogoutHandler</span><span class=\"token punctuation\">(</span>refreshTokenRepository<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        http\n            <span class=\"token punctuation\">.</span><span class=\"token function\">authorizeRequests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token function\">securityConstant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_ROLE_PERMIT_PATHS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasRole</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SecurityConstant</span><span class=\"token punctuation\">.</span><span class=\"token constant\">USER_ROLE</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">anyRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">denyAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        http<span class=\"token punctuation\">.</span><span class=\"token function\">addFilterBefore</span><span class=\"token punctuation\">(</span>jwtAuthenticationFilter<span class=\"token punctuation\">,</span> <span class=\"token class-name\">UsernamePasswordAuthenticationFilter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        http<span class=\"token punctuation\">.</span><span class=\"token function\">addFilterAfter</span><span class=\"token punctuation\">(</span>jwtAuthorizationFilter<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JwtAuthenticationFilter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>securityFilterChain() ë©”ì„œë“œì—ì„œ HttpSecurity ê°ì²´ë¥¼ í†µí•´ ì—¬ëŸ¬ ë³´ì•ˆ ì„¤ì •ì„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ ë©”ì„œë“œ ë‚´ì—ì„œ ì •ì˜ëœ ì„¤ì •ì— ë”°ë¼ FilterChainProxyì— í•„í„°ê°€ ì¶”ê°€í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>JwtAuthenticationFilterëŠ” ì‚¬ìš©ìì˜ JWT í† í°ì„ ê²€ì¦í•´ ì¸ì¦ ê³¼ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</li>\n<li>JWTAuthorizationFilterëŠ” ì‚¬ìš©ìê°€ ìš”ì²­í•œ ìì›ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ í™•ì¸í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.</li>\n</ul>\n<p><br> <br></p>\n<h3 id=\"jwtauthenticationfilter\" style=\"position:relative;\"><a href=\"#jwtauthenticationfilter\" aria-label=\"jwtauthenticationfilter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JwtAuthenticationFilter</h3>\n<ul>\n<li>UsernamePasswordAuthenticationFilterë¥¼ í™•ì¥í•˜ì—¬ JWT ê¸°ë°˜ì˜ ì¸ì¦ ë¡œì§ì„ êµ¬í˜„í•œ ì»¤ìŠ¤í…€ í•„í„°ì…ë‹ˆë‹¤.</li>\n<li>ë¡œê·¸ì¸ ìš”ì²­ ì²˜ë¦¬ì™€ ì¸ì¦ ì„±ê³µ ì²˜ë¦¬, ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtAuthenticationFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RefreshTokenRepository</span> refreshTokenRepository<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberSkillRepository</span> memberSkillRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshTokenRepository <span class=\"token operator\">=</span> refreshTokenRepository<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>memberSkillRepository <span class=\"token operator\">=</span> memberSkillRepository<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setFilterProcessesUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/login\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>/api/login í˜¸ì¶œ ì‹œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h3 id=\"ë¡œê·¸ì¸-ìš”ì²­-ì²˜ë¦¬\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%9A%94%EC%B2%AD-%EC%B2%98%EB%A6%AC\" aria-label=\"ë¡œê·¸ì¸ ìš”ì²­ ì²˜ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¡œê·¸ì¸ ìš”ì²­ ì²˜ë¦¬</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">Authentication</span> <span class=\"token function\">attemptAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">WrongLoginException</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t    <span class=\"token comment\">// formìœ¼ë¡œ ë„˜ì–´ì˜¨ ê°’ìœ¼ë¡œ member ê°ì²´ë¥¼ ìƒì„±</span>\n\t    <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">readValue</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t    <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span> userToken <span class=\"token operator\">=</span>\n\t\t    <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">getEmail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setDetails</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> userToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t    <span class=\"token comment\">// AuthenticationManager ì— ì¸ì¦ì„ ìœ„ì„í•œë‹¤.</span>\n\t    <span class=\"token keyword\">return</span> <span class=\"token function\">getAuthenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>userToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthenticationServiceException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.<br>\nì‚¬ìš©ìê°€ ì…ë ¥í•œ  id, pwë¥¼ ë‹´ì•„ UsernamePasswordAuthentication ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>\n<p>ìƒì„±ëœ ì¸ì¦ í† í°ì€ AuthenticationManager ì—ê²Œ ì „ë‹¬ë˜ì–´ ë„˜ê¹ë‹ˆë‹¤.</p>\n<br> \n<h3 id=\"ì¸ì¦-ì„±ê³µ-ì²˜ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D-%EC%84%B1%EA%B3%B5-%EC%B2%98%EB%A6%AC\" aria-label=\"ì¸ì¦ ì„±ê³µ ì²˜ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¸ì¦ ì„±ê³µ ì²˜ë¦¬</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">successfulAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FilterChain</span> chain<span class=\"token punctuation\">,</span>\n\t\t\t\t    <span class=\"token class-name\">Authentication</span> authResult<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ServletException</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// 1. ë¡œê·¸ì¸ ì„±ê³µëœ ìœ ì € ì¡°íšŒ</span>\n\t<span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CustomMemberDetails</span><span class=\"token punctuation\">)</span> authResult<span class=\"token punctuation\">.</span><span class=\"token function\">getPrincipal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMember</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// 2. Refresh Token DB ì €ì¥ (í•´ë‹¹ ìœ ì €ì˜ ë¦¬í”„ë ˆì‹œ í† í°ì´ ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´, ì‚­ì œ í›„ ì €ì¥)</span>\n\t<span class=\"token class-name\">String</span> refreshToken <span class=\"token operator\">=</span> <span class=\"token class-name\">JwtUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">createRefreshToken</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">Long</span> refreshTokenId <span class=\"token operator\">=</span> <span class=\"token function\">saveRefreshToken</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> refreshToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// 3. AccessToken ë°œê¸‰</span>\n\t<span class=\"token class-name\">String</span> accessToken <span class=\"token operator\">=</span> <span class=\"token class-name\">JwtUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">createAccessToken</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> refreshTokenId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token class-name\">LoginResponse</span> loginResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LoginResponse</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token class-name\">ResponseUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">createResponseBody</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> loginResponse<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì¸ì¦ ì„±ê³µ ì‹œ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œë¡œ, ì¸ì¦ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì§€ê³  ë¦¬í”„ë ˆì‹œ í† í°ì„ ìƒì„±, DBì— ì €ì¥í•©ë‹ˆë‹¤.<br>\nì—‘ì„¸ìŠ¤ í† í°ì„ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë¡œê·¸ì¸ ì„±ê³µ(200) ì‘ë‹µê³¼ í•¨ê»˜ ì—‘ì„¸ìŠ¤ í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<br> \n<h3 id=\"ì¸ì¦-ì‹¤íŒ¨-ì²˜ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D-%EC%8B%A4%ED%8C%A8-%EC%B2%98%EB%A6%AC\" aria-label=\"ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">unsuccessfulAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> <span class=\"token class-name\">AuthenticationException</span> failed<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ServletException</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">BaseErrorResponse</span> errorResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BaseErrorResponse</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"email, password ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">ResponseUtil</span><span class=\"token punctuation\">.</span><span class=\"token function\">createResponseBody</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> errorResponse<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì¸ì¦ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œë¡œ, ì¸ì¦ ì‹¤íŒ¨ì— ëŒ€í•œ ì˜¤ë¥˜ë¥¼ ì‘ë‹µìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.\n<br> <br></p>\n<h3 id=\"jwtauthenticationprovider\" style=\"position:relative;\"><a href=\"#jwtauthenticationprovider\" aria-label=\"jwtauthenticationprovider permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JwtAuthenticationProvider</h3>\n<p>AuthenticationProvider ë¥¼ ì»¤ìŠ¤í…€í•˜ê²Œ êµ¬í˜„í•œ í´ë˜ìŠ¤ì…ë‹ˆë‹¤</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAuthenticationProvider</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">AuthenticationProvider</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CustomMemberDetailsService</span> customMemberDetailsService<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">BCryptPasswordEncoder</span> passwordEncoder<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Authentication</span> <span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span> authentication<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">AuthenticationException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span> token <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">)</span> authentication<span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">String</span> email <span class=\"token operator\">=</span> token<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> password <span class=\"token operator\">=</span> token<span class=\"token punctuation\">.</span><span class=\"token function\">getCredentials</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">CustomMemberDetails</span> savedMember <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CustomMemberDetails</span><span class=\"token punctuation\">)</span> customMemberDetailsService<span class=\"token punctuation\">.</span><span class=\"token function\">loadUserByUsername</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>passwordEncoder<span class=\"token punctuation\">.</span><span class=\"token function\">matches</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> savedMember<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BadCredentialsException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ë¡œê·¸ì¸ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">,</span> savedMember<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">supports</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> authentication<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> authentication<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>AuthenticationFilter -> AuthenticationManager -> AuthenticationProviderë¡œ ì¸ì¦ ë¡œì§ì„ ìœ„ì„í•©ë‹ˆë‹¤.</p>\n<h4 id=\"authenticate\" style=\"position:relative;\"><a href=\"#authenticate\" aria-label=\"authenticate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>authenticate()</h4>\n<ul>\n<li>ì¸ì¦ ë©”ì„œë“œë¡œ ì‹¤ì œ ì¸ì¦ ê³¼ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. A.T(ì—‘ì„¸ìŠ¤í† í°)ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ ì‚¬ìš©ìê°€ ì œê³µí•œ email, pwë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.</li>\n<li>CustomMemberDetails ê°ì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ì ìƒì„¸ ì •ë³´)</li>\n<li>ë¹„ë°€ë²ˆí˜¸ê°€ ë§ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì¼ì¹˜í•˜ë©´ ìƒˆë¡œìš´ ê¶Œí•œê³¼ í•¨ê»˜ ìƒˆë¡œìš´ UsernamePasswordAuthenticationToken ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤.</li>\n</ul>\n<hr>\n<br>\nSecurity ì—ì„œ ë‹¤ë£¨ëŠ” ìœ ì € ì •ë³´(UserDetails)ì™€ ì‹¤ì œ Domain Entity ì‚¬ì´ì— ì°¨ì´ê°€ ìˆê¸° ë•Œë¬¸ì—,  \nUserDetails ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•´ì¤ë‹ˆë‹¤.  \n<h3 id=\"custommemberdetails\" style=\"position:relative;\"><a href=\"#custommemberdetails\" aria-label=\"custommemberdetails permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CustomMemberDetails</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomMemberDetails</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserDetails</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">CustomMemberDetails</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>member <span class=\"token operator\">=</span> member<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GrantedAuthority</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GrantedAuthority</span><span class=\"token punctuation\">></span></span> authorities <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Role</span> role <span class=\"token operator\">=</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getRoles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        authorities<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleGrantedAuthority</span><span class=\"token punctuation\">(</span>role<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> authorities<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h3 id=\"custommemberdeatilsservice\" style=\"position:relative;\"><a href=\"#custommemberdeatilsservice\" aria-label=\"custommemberdeatilsservice permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CustomMemberDeatilsService</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomMemberDetailsService</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserDetailsService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRepository</span> memberRepository<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserDetails</span> <span class=\"token function\">loadUserByUsername</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> username<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">UsernameNotFoundException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findByEmailAndProvider</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span> <span class=\"token string\">\"normal\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CustomMemberDetails</span><span class=\"token operator\">::</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernameNotFoundException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë©”ì¼: \"</span> <span class=\"token operator\">+</span> username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Memberì˜ provider í•„ë“œëŠ” ì†Œì…œë¡œê·¸ì¸ ì‹œì— ê°™ì´ ì“°ì´ëŠ” ê°’ì…ë‹ˆë‹¤. (â€œnaverâ€, â€œgoogleâ€â€¦)</p>\n<p>ì´ë©”ì¼ì€ ê²¹ì¹  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— user.findByEmail()ì€ ì“°ë©´ ì•ˆ ë©ë‹ˆë‹¤. Provider ê°’ë„ í•¨ê»˜ í™•ì¸í•˜ëŠ” ì‘ì—…ì´ í•„ìˆ˜!</p>\n<p>loadUserByUsername()ìœ¼ë¡œ UserDetails ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. (ì—¬ê¸°ì„œëŠ” CustomMemberDetails)<br>\n<br> <br></p>\n<h3 id=\"jwtauthorizationfilter\" style=\"position:relative;\"><a href=\"#jwtauthorizationfilter\" aria-label=\"jwtauthorizationfilter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JwtAuthorizationFilter</h3>\n<p>ì‹œíë¦¬í‹°ì˜ BasicAuthenticationFilterë¥¼ ìƒì†ë°›ì•„ íŠ¹ì • ìš”ì²­ì— ëŒ€í•´ JWT ê¸°ë°˜ì˜ ì¸ì¦ ë° ì¸ê°€ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•„í„°ì…ë‹ˆë‹¤.\n(ë„ˆë¬´ ê¸¸ì–´ì„œ ì½”ë“œëŠ” ëºìŠµë‹ˆë‹¤..!)</p>\n<h4 id=\"ê¸°ëŠ¥\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5\" aria-label=\"ê¸°ëŠ¥ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê¸°ëŠ¥</h4>\n<ul>\n<li>ì˜ˆì™¸ URL í™•ì¸ : íŠ¹ì • URL íŒ¨í„´ì„ ì¸ì¦ ê³¼ì •ì—ì„œ ì œì™¸í•©ë‹ˆë‹¤.</li>\n<li>ì—‘ì„¸ìŠ¤ í† í° í™•ì¸ : ìš”ì²­ í—¤ë”(Authorization) ì—ì„œ ì—‘ì„¸ìŠ¤ í† í°ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.</li>\n<li>ì¶”ì¶œí•œ ì—‘ì„¸ìŠ¤ í† í°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤. ë§Œë£Œë˜ì—ˆê±°ë‚˜ ì˜ëª»ëœ í˜•ì‹ì¸ ê²½ìš°ì—ëŠ” ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.</li>\n<li>ì—‘ì„¸ìŠ¤ í† í°ì´ ë§Œë£Œë˜ì—ˆì„ ê²½ìš° JWT í´ë ˆì„ì—ì„œ refresh_token IDë¥¼ ì¶”ì¶œí•´ í•´ë‹¹ ë©¤ë²„ì˜ ë¦¬í”„ë ˆì‹œ í† í°ì˜ ìœ íš¨ì„±ì„ í™•ì¸í•©ë‹ˆë‹¤. ìœ íš¨í•œ ê²½ìš° ì—‘ì„¸ìŠ¤í† í°ì„ ì¬ë°œê¸‰í•˜ë©° ë¦¬í”„ë ˆì‹œ í† í° ì—­ì‹œ ë§Œë£Œëœ ê²½ìš° ì¬ì¸ì¦ì„ ìš”êµ¬í•©ë‹ˆë‹¤.</li>\n<li>ì‚¬ìš©ì ì¸ì¦ ì •ë³´ë¥¼ SecurityContextHolderì— ì €ì¥í•©ë‹ˆë‹¤.</li>\n</ul>\n<p>ì—‘ì„¸ìŠ¤ í† í°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³  ë§Œë£Œëœ ê²½ìš°, ì—‘ì„¸ìŠ¤ í† í°ì„ ì¬ë°œê¸‰í•©ë‹ˆë‹¤.<br>\n<br>\n<br></p>\n<h3 id=\"ëŠë‚€-ì \" style=\"position:relative;\"><a href=\"#%EB%8A%90%EB%82%80-%EC%A0%90\" aria-label=\"ëŠë‚€ ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ëŠë‚€ ì </h3>\n<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ë™ì‘ ì›ë¦¬ë¥¼ ë°°ì›Œ ì‹¤ì œë¡œ ì ìš©í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.<br>\nê·¸ë™ì•ˆ ê°œë°œ ê³¼ì •ì—ì„œ ë³´ì•ˆì„ ë“±í•œì‹œ í–ˆë˜ ê²Œ ì•„ë‹Œì§€ ë°˜ì„±í•˜ì˜€ê³ , ì‹œí”„ë§ ì‹œíë¦¬í‹°ë¥¼ í†µí•´ í•„í„°ì—ì„œ ë³´ì•ˆ ê´€ë ¨ ì²˜ë¦¬ë¥¼ í•˜ì—¬ ì¸ì¦/ì¸ê°€ ê³¼ì •ì„ ëŒ€ëµì ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p>AuthorizationFilter ì—ì„œ JWT ê´€ë ¨ ì²˜ë¦¬ë¥¼ ëª¨ë‘ ë‹´ë‹¹í•˜ê³  ìˆëŠ”ë° ì½”ë“œê°€ ê¸¸ê³ , ì§€ì €ë¶„í•´ ì¶”í›„ì— ë¦¬íŒ©í† ë§ í•  ì˜ˆì •ì…ë‹ˆë‹¤.<br>\në˜í•œ ë¦¬í”„ë ˆì‹œ í† í°ì„ DBì— ì €ì¥í•´ë‘ëŠ”ë°, ë” íš¨ê³¼ì ì¸ ë°©ë²•ì€ ì—†ëŠ”ì§€ ê³ ë¯¼í•˜ê³  ìˆìŠµë‹ˆë‹¤</p>","frontmatter":{"date":"February 01, 2024","title":"Spring Securityë¥¼ ì´ìš©í•œ ì¸ì¦/ì¸ê°€ êµ¬í˜„","categories":"Backend","author":"í•˜ì •ìˆ˜","emoji":"âœï¸"},"fields":{"slug":"/b-login/"}},"site":{"siteMetadata":{"siteUrl":"https://flow-team-project.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/b-improve-query/","nextSlug":"/b-branch-convention/","prevSlug":"/b-login/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}